---
title: "final"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
library(here)
library(janitor)
library(lubridate)
library(sf)
library(mapview)
```

```{r}

NMFS_transect <- read_csv(here("data", "table_257.csv")) %>% 
  clean_names()

NMFS_obs <- read_csv(here("data", "table_258.csv")) %>% 
  clean_names()

laal_hi_band <- read_csv(here("data", "laal_hi_bbl2021_bnd_enc.csv")) 

laal_ca_band <- read_csv(here("data", "laal_ca_bbl2021_bnd_enc.csv")) 
  
```

```{r}
nmfs_data <- NMFS_obs %>%
  inner_join(NMFS_transect, by = "gis_key")

```

```{r}
write.csv(nmfs_data, "C:\\Users\\julia\\Documents\\_MEDS\\EDS222_Stats_Carleton\\Assignments\\final_project\\eds222_final", row.names = FALSE)

```

```{r}
nmfs_data <- nmfs_data %>% 
  separate(date, sep="-", into = c("year", "month", "day"))
  
```

```{r}
nmfs_data <- nmfs_data %>% 
  mutate(common_name = "") %>% 
  filter(species == c("BFAL", "LAAL")) %>% 
  relocate(common_name, .after = species)
```

```{r}
nmfs_data <- nmfs_data %>% 
  mutate(common_name = case_when(
    species == "BFAL" ~ "Blackfooted albatross",
    species == "LAAL" ~ "Laysan albatross"
  )
  )
```

```{r}
laal_hi_band <- laal_hi_band %>% 
  mutate(species = "LAAL") %>% 
  relocate(species, .after = original_band) %>% 
  relocate(species_name, .after = species) %>% 
  relocate(species_scientific_name, .after = species_name) %>% 
  select(c(-other_bands, -who_obtained_code))
  
```

```{r}
laal_ca_band <- laal_ca_band %>% 
  mutate(species = "LAAL") %>% 
  relocate(species, .after = original_band) %>% 
  relocate(species_name, .after = species) %>% 
  relocate(species_scientific_name, .after = species_name) %>% 
  select(c(-other_bands, -who_obtained_code))
```

```{r}
laal_ca_sf <- st_as_sf(laal_ca_band, coords = c("lon_dd","lat_dd"), crs = 4326)

laal_hi_sf <- st_as_sf(laal_hi_band, coords = c("lon_dd","lat_dd"), crs = 4326)
```

```{r}
mapview(laal_ca_sf) +
  mapview(laal_hi_sf)

```





